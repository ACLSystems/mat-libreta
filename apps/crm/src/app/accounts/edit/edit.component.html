<div class="main-content">
	<div *ngIf="loading" class="text-center">
		<app-loading-spinner></app-loading-spinner>
	</div>
	<div class="container-fluid" *ngIf="!loading">
		<div class="row">
			<div class="col-9">
				<div class="card">
					<div
						class="card-header card-header-icon"
						[ngClass]="{'card-header-secondary': account.happiness=='unknown', 'card-header-success': account.happiness=='elated','card-header-info': account.happiness=='happy','card-header-warning': account.happiness=='neutral','card-header-danger': account.happiness=='angry' || account.happiness=='fragile' }"
						>
						<div class="card-icon">
							<i
								class="far fa-meh-blank fa-2x"
								*ngIf="account.happiness == 'unknown'"
								>
							</i>
							<i
								class="far fa-angry fa-2x"
								*ngIf="account.happiness == 'angry'"
								>
							</i>
							<i
								class="far fa-frown-open fa-2x"
								*ngIf="account.happiness == 'fragile'"
								>
							</i>
							<i
								class="far fa-meh fa-2x"
								*ngIf="account.happiness == 'neutral'"
								>
							</i>
							<i
								class="far fa-smile fa-2x"
								*ngIf="account.happiness == 'happy'"
								>
							</i>
							<i
								class="far fa-laugh-beam fa-2x"
								*ngIf="account.happiness == 'elated'"
								>
							</i>
						</div>
						<h3 class="card-title">
							<small>Editando Cuenta</small>&nbsp;<b class="text-primary">{{account.name}}</b>
							<button
								class="btn btn-sm btn-secondary float-right"
								(click)="cancel();"
								>
								Regresar
							</button>
						</h3>
					</div>
					<div class="card-body">
						<div class="row">
							<div class="col">
								<div class="bg bg-secondary text-white"><b>&nbsp;<i class="far fa-building"></i> Nombre</b></div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating">Nombre corto (comercial) <span class="text-danger">*</span></label>
									<input
										type="text"
										class="form-control"
										[formControl]="name"
										required
										(blur)="checkOrgExistence();"
										>
								</div>
							</div>
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating">Nombre largo (razón social) <span class="text-danger">*</span></label>
									<input
										#long
										type="text"
										class="form-control"
										[formControl]="longName"
										required
										>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="bg bg-secondary text-white"><b>&nbsp;<i class="fas fa-phone"></i> Teléfonos e <i class="far fa-envelope"></i> emails</b></div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating">Teléfono principal</label>
									<input
										type="text"
										class="form-control"
										[formControl]="mainPhone"
										required
										>
								</div>
							</div>
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating">Teléfono secundario</label>
									<input
										type="text"
										class="form-control"
										[formControl]="phone"
										required
										>
								</div>
							</div>
							<div class="col">
								<div class="form-group">
									<mat-form-field class="bmd-label-floating">
										<mat-chip-list #chipEmailList aria-label="Emails">
											<mat-chip
												*ngFor="let email of emails"
												[color]="color"
												[selectable]="selectableEmail"
												[removable]="removableEmail"
												(removed)="removeEmail(email)">
												{{ email }}
												<mat-icon matChipRemove *ngIf="removableEmail">cancel</mat-icon>
											</mat-chip>
											<input placeholder="Emails"
												[matChipInputFor]="chipEmailList"
												[matChipInputSeparatorKeyCodes]="separatorKeysCodes"
												[matChipInputAddOnBlur]="addEmailOnBlur"
												(matChipInputTokenEnd)="addEmail($event)">
										</mat-chip-list>
									</mat-form-field>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="bg bg-secondary text-white"><b>&nbsp;<i class="fas fa-info"></i> Detalles</b></div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="form-group">
									<mat-form-field>
										<mat-select
											multiple
											placeholder="Tipo"
											[formControl]="type"
											name="type"
											ariaLabel="types[0]"
											(selectionChange)="setField('type','type','types');"
											>
											<mat-option *ngFor="let accType of types" [value]="accType.value">
													{{ accType.viewValue }}
											</mat-option>
										</mat-select>
									</mat-form-field>
								</div>
								<div class="form-group">
									<mat-form-field>
										<mat-select
											placeholder="Vendedor"
											[formControl]="owner"
											name="owner"
											ariaLabel="owners[0]"
											(selectionChange)="setField('owner','owner','owners','_id');"
											>
												<mat-option *ngFor="let userOwner of owners" [value]="userOwner.value">
														{{ userOwner.viewValue }}
												</mat-option>
										</mat-select>
									</mat-form-field>
								</div>
							</div>
							<div class="col">
								<div class="row">
									<div class="col-1">
										<i
											class="far fa-meh-blank fa-2x"
											*ngIf="account.happiness == 'unknown'"
											>
										</i>
										<i
											class="far fa-angry text-danger fa-2x"
											*ngIf="account.happiness == 'angry'"
											>
										</i>
										<i
											class="far fa-frown-open text-danger fa-2x"
											*ngIf="account.happiness == 'fragile'"
											>
										</i>
										<i
											class="far fa-meh text-warning fa-2x"
											*ngIf="account.happiness == 'neutral'"
											>
										</i>
										<i
											class="far fa-smile text-info fa-2x"
											*ngIf="account.happiness == 'happy'"
											>
										</i>
										<i
											class="far fa-laugh-beam text-success fa-2x"
											*ngIf="account.happiness == 'elated'"
											>
										</i>
									</div>
									<div class="col">
										<div class="form-group">
											<mat-form-field>
												<mat-select placeholder="Felicidad"
												(selectionChange)="setField('happiness','accountHappiness');"
												[formControl]="accountHappiness"
												name="accountHappiness"
												ariaLabel="happiness[0]">
														<mat-option *ngFor="let hap of happiness" [value]="hap.value">
																{{ hap.viewValue }}
														</mat-option>
												</mat-select>
											</mat-form-field>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col">
										<mat-form-field class="bmd-label-floating">
											<mat-chip-list #tagsList aria-label="Etiquetas">
												<mat-chip
													*ngFor="let tag of tags"
													[color]="color"
													[selectable]="selectableTag"
													[removable]="removableTag"
													(removed)="removeTag(tag)">
													{{tag}}
													<mat-icon matChipRemove *ngIf="removableTag">cancel</mat-icon>
												</mat-chip>
												<input
													placeholder="Etiquetas"
													#tagInput
													[formControl]="tagsCtrl"
													[matAutocomplete]="auto"
													[matChipInputFor]="tagsList"
													[matChipInputSeparatorKeyCodes]="separatorKeysCodes"
													[matChipInputAddOnBlur]="addTagOnBlur"
													(matChipInputTokenEnd)="addTag($event)">
											</mat-chip-list>
											<mat-autocomplete
												#auto="matAutocomplete"
												(optionSelected)="selectedTag($event)"
												>
												<mat-option
													*ngFor="let tag of filteredTags | async"
													[value]="tag"
													>
													{{tag}}
												</mat-option>
											</mat-autocomplete>
										</mat-form-field>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="form-group">
									<mat-form-field>
										<textarea
											matInput
											placeholder="Notas"
											[formControl]="notes"
										></textarea>
									</mat-form-field>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="bg bg-secondary text-white"><b>&nbsp;<i class="far fa-thumbs-up"></i> Redes Sociales</b></div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating"><i class="fab fa-twitter"></i> Twitter</label>
									<input
										type="text"
										class="form-control"
										[formControl]="twitter"
										(blur)="setField('social','twitter',null,'twitter');"
									>
								</div>
							</div>
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating"><i class="fab fa-facebook"></i> Facebook</label>
									<input
										type="text"
										class="form-control"
										[formControl]="facebook"
										(blur)="setField('social','facebook',null,'facebook');"
									>
								</div>
							</div>
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating"><i class="fab fa-linkedin"></i> Linkedin</label>
									<input
										type="text"
										class="form-control"
										[formControl]="linkedin"
										(blur)="setField('social','linkedin',null,'linkedin');"
									>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating"><i class="fab fa-google-plus"></i> Google</label>
									<input
										type="text"
										class="form-control"
										[formControl]="google"
										(blur)="setField('social','google',null,'google');"
									>
								</div>
							</div>
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating"><i class="fab fa-instagram"></i> Instagram</label>
									<input
										type="text"
										class="form-control"
										[formControl]="instagram"
										(blur)="setField('social','instagram',null,'instagram');"
									>
								</div>
							</div>
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating"><i class="fab fa-skype"></i> Skype</label>
									<input
										type="text"
										class="form-control"
										[formControl]="skype"
										(blur)="setField('social','skype',null,'skype');"
									>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="bg bg-secondary text-white"><b>&nbsp;<i class="fas fa-map"></i> Dirección</b></div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating">Código Postal</label>
									<input
										type="text"
										class="form-control"
										[formControl]="postalCode"
										(blur)="getPostalCode();"
									>
								</div>
							</div>
							<div class="col">
								<div class="form-group">
									<mat-form-field>
										<mat-select
										placeholder="Colonia"
										[formControl]="suburb"
										name="suburb"
										ariaLabel="suburbs[0]"
										(selectionChange)="setField('address','suburb',null,'suburb');"
										>
												<mat-option *ngFor="let colonia of suburbs" [value]="colonia.value">
														{{ colonia.viewValue }}
												</mat-option>
										</mat-select>
									</mat-form-field>
								</div>
							</div>
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating">Municipio/Delegación</label>
									<input
										type="text"
										class="form-control"
										[formControl]="locality"
										(blur)="setField('address','locality',null,'locality');"
									>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating">Calle</label>
									<input
										type="text"
										class="form-control"
										[formControl]="street"
										(blur)="setField('address','street',null,'street');"
									>
								</div>
							</div>
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating">Ext</label>
									<input
										type="text"
										class="form-control"
										[formControl]="ext"
										(blur)="setField('address','ext',null,'ext');"
									>
								</div>
							</div>
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating">Int</label>
									<input
										type="text"
										class="form-control"
										[formControl]="int"
										(blur)="setField('address','int',null,'int');"
									>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating">Ciudad</label>
									<input
										type="text"
										class="form-control"
										[formControl]="city"
										(blur)="setField('address','city',null,'city');"
									>
								</div>
							</div>
							<div class="col">
								<mat-form-field>
									<mat-select
									placeholder="Estado"
									[formControl]="state"
									name="state"
									ariaLabel="states[0]"
									(selectionChange)="this.setField('address','state',null,'state');"
									>
											<mat-option *ngFor="let userState of states" [value]="userState.value">
													{{ userState.viewValue }}
											</mat-option>
									</mat-select>
								</mat-form-field>
							</div>
							<div class="col">
								<div class="form-group">
									<label class="bmd-label-floating">País</label>
									<input
										type="text"
										class="form-control"
										[formControl]="country"
										(blur)="setField('address','country',null,'country');"
									>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col">
								<div class="btn-group float-right">
									<button
										class="btn btn-sm btn-secondary"
										(click)="cancel();"
										>
										Regresar
									</button>
									<button
										class="btn btn-sm btn-primary"
										(click)="saveAccount();"
										>
										Guardar
									</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col">
				<div class="card">
					<div class="card-body">
						<div class="btn-group" role="group">
							<button
								mat-raised-button
								matTooltip="Agregar negocio"
								matTooltipPosition="above"
								class="btn btn-sm btn-warning"
								name="button"
							> +
								<i class="fas fa-dollar-sign"></i>
							</button>
							<button
								mat-raised-button
								matTooltip="Agregar usuario"
								matTooltipPosition="above"
								class="btn btn-sm btn-info"
								name="button"
							> +
								<i class="fas fa-user"></i>
							</button>
						</div>
					</div>
				</div>
				<div class="card">
					<div class="card-header">
						<p class="card-title">Usuarios relacionados a </p><h4 class="text-primary">{{account.name}}</h4>
					</div>
					<div class="card-body">
						Usuario 1
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
